ingress:
  annotations:
    kubernetes.io/ingress.class: azure/application-gateway
  hosts:
    - grafana.cloud.tomaskubica.in
  enabled: true

admin:
  existingSecret: grafana-login

datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
    - name: Azure Monitor
      type: grafana-azure-monitor-datasource
      access: proxy
      isDefault: false
      jsonData:
        cloudName: azuremonitor
        subscriptionId: "{{ .Values.subscriptionId }}"
        tenantId: "{{ .Values.tenantId }}"
        logAnalyticsTenantId: "{{ .Values.tenantId }}"
        clientId: "{{ .Values.clientId }}"
        logAnalyticsClientId: "{{ .Values.clientId }}"
        logAnalyticsDefaultWorkspace: "{{ .Values.workspaceId }}"
        azureLogAnalyticsSameAs: true
      secureJsonData:
        clientSecret: "{{ .Values.clientSecret }}"
        logAnalyticsClientSecret: "{{ .Values.clientSecret }}"
    - name: Prometheus
      type: prometheus
      url: http://prometheus-server.prometheus.svc.cluster.local
      access: proxy
      editable: true

dashboardProviders:
  dashboardproviders.yaml:
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      editable: true
      options:
        path: /var/lib/grafana/dashboards/default

dashboards:
  default:
    MyApp-SPA-Prometheus:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 6,
          "links": [],
          "panels": [
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 0
              },
              "hiddenSeries": false,
              "id": 2,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "nginx_http_requests_total { app=\"myapp-spa\" }",
                  "interval": "",
                  "legendFormat": "",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "My app SPA requests",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "schemaVersion": 22,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": []
          },
          "time": {
            "from": "now-6h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ]
          },
          "timezone": "",
          "title": "My App SPA via Prometheus Copy",
          "uid": "_1xyJR6Wz",
          "variables": {
            "list": []
          },
          "version": 1
        }

    Nginx-Ingress:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "Prometheus",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              },
              {
                "datasource": "Prometheus",
                "enable": true,
                "expr": "sum(changes(nginx_ingress_controller_config_last_reload_successful_timestamp_seconds{instance!=\"unknown\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[30s])) by (controller_class)",
                "hide": false,
                "iconColor": "rgba(255, 96, 96, 1)",
                "limit": 100,
                "name": "Config Reloads",
                "showIn": 0,
                "step": "30s",
                "tagKeys": "controller_class",
                "tags": [],
                "titleFormat": "Config Reloaded",
                "type": "tags"
              }
            ]
          },
          "description": "Ingress-nginx supports a rich collection of prometheus metrics. If you have prometheus and grafana installed on your cluster then prometheus will already be scraping this data due to the scrape annotation on the deployment.",
          "editable": true,
          "gnetId": 9614,
          "graphTooltip": 0,
          "id": 5,
          "iteration": 1587627519017,
          "links": [],
          "panels": [
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "Prometheus",
              "format": "ops",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "id": 20,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": true
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m])), 0.001)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 4
                }
              ],
              "thresholds": "",
              "title": "Controller Request Volume",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "Prometheus",
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 6,
                "y": 0
              },
              "id": 82,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": true
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(avg_over_time(nginx_ingress_controller_nginx_process_connections{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))",
                  "format": "time_series",
                  "instant": false,
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 4
                }
              ],
              "thresholds": "",
              "title": "Controller Connections",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "Prometheus",
              "format": "percentunit",
              "gauge": {
                "maxValue": 100,
                "minValue": 80,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": false
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 12,
                "y": 0
              },
              "id": 21,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": true
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",status!~\"[4-5].*\"}[2m])) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\"}[2m]))",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 4
                }
              ],
              "thresholds": "95, 99, 99.5",
              "title": "Controller Success Rate (non-4|5xx responses)",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "Prometheus",
              "decimals": 0,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 18,
                "y": 0
              },
              "id": 81,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": true
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "avg(nginx_ingress_controller_success{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"})",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 4
                }
              ],
              "thresholds": "",
              "title": "Config Reloads",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "Prometheus",
              "decimals": 0,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 3,
                "x": 21,
                "y": 0
              },
              "id": 83,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": true
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "count(nginx_ingress_controller_config_last_reload_successful{controller_pod=~\"$controller\",controller_namespace=~\"$namespace\"} == 0)",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 4
                }
              ],
              "thresholds": "",
              "title": "Last Config Failed",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 1,
              "fillGradient": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 3
              },
              "height": "200px",
              "hiddenSeries": false,
              "id": 86,
              "isNew": true,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": false,
                "hideEmpty": false,
                "hideZero": true,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": 300,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "repeat": null,
              "repeatDirection": "h",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "round(sum(irate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress), 0.001)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "metric": "network",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Ingress Request Volume",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "reqps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "Bps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "max - istio-proxy": "#890f02",
                "max - master": "#bf1b00",
                "max - prometheus": "#bf1b00"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "decimals": 2,
              "editable": false,
              "error": false,
              "fill": 0,
              "fillGradient": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 3
              },
              "hiddenSeries": false,
              "id": 87,
              "isNew": true,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": false,
                "hideEmpty": true,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": 300,
                "sort": "avg",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\",status!~\"[4-5].*\"}[2m])) by (ingress) / sum(rate(nginx_ingress_controller_requests{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)",
                  "format": "time_series",
                  "instant": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "metric": "container_memory_usage:sort_desc",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Ingress Success Rate (non-4|5xx responses)",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 1,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "percentunit",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 1,
              "fillGradient": 0,
              "grid": {},
              "gridPos": {
                "h": 6,
                "w": 8,
                "x": 0,
                "y": 10
              },
              "height": "200px",
              "hiddenSeries": false,
              "id": 32,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": true,
                "current": true,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": false,
                "sideWidth": 200,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (irate (nginx_ingress_controller_request_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))",
                  "format": "time_series",
                  "instant": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "Received",
                  "metric": "network",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "- sum (irate (nginx_ingress_controller_response_size_sum{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m]))",
                  "format": "time_series",
                  "hide": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "Sent",
                  "metric": "network",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Network I/O pressure",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "Bps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "max - istio-proxy": "#890f02",
                "max - master": "#bf1b00",
                "max - prometheus": "#bf1b00"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "decimals": 2,
              "editable": false,
              "error": false,
              "fill": 0,
              "fillGradient": 0,
              "grid": {},
              "gridPos": {
                "h": 6,
                "w": 8,
                "x": 8,
                "y": 10
              },
              "hiddenSeries": false,
              "id": 77,
              "isNew": true,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": true,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": false,
                "sideWidth": 200,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "avg(nginx_ingress_controller_nginx_process_resident_memory_bytes{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}) ",
                  "format": "time_series",
                  "instant": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "nginx",
                  "metric": "container_memory_usage:sort_desc",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Average Memory Usage",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "max - istio-proxy": "#890f02",
                "max - master": "#bf1b00"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "decimals": 3,
              "editable": false,
              "error": false,
              "fill": 0,
              "fillGradient": 0,
              "grid": {},
              "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 10
              },
              "height": "",
              "hiddenSeries": false,
              "id": 79,
              "isNew": true,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": true,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": false,
                "sort": null,
                "sortDesc": null,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (rate (nginx_ingress_controller_nginx_process_cpu_seconds_total{controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\"}[2m])) ",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "nginx",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [
                {
                  "colorMode": "critical",
                  "fill": true,
                  "line": true,
                  "op": "gt"
                }
              ],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Average CPU Usage",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": "cores",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "columns": [],
              "datasource": "Prometheus",
              "fontSize": "100%",
              "gridPos": {
                "h": 8,
                "w": 24,
                "x": 0,
                "y": 16
              },
              "hideTimeOverride": false,
              "id": 75,
              "links": [],
              "pageSize": 7,
              "repeat": null,
              "repeatDirection": "h",
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 1,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Ingress",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "ingress",
                  "preserveFormat": false,
                  "sanitize": false,
                  "thresholds": [],
                  "type": "string",
                  "unit": "short"
                },
                {
                  "alias": "Requests",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Value #A",
                  "thresholds": [
                    ""
                  ],
                  "type": "number",
                  "unit": "ops"
                },
                {
                  "alias": "Errors",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "ops"
                },
                {
                  "alias": "P50 Latency",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "link": false,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "dtdurations"
                },
                {
                  "alias": "P90 Latency",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "dtdurations"
                },
                {
                  "alias": "P99 Latency",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "pattern": "Value #E",
                  "thresholds": [],
                  "type": "number",
                  "unit": "dtdurations"
                },
                {
                  "alias": "IN",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Value #F",
                  "thresholds": [
                    ""
                  ],
                  "type": "number",
                  "unit": "Bps"
                },
                {
                  "alias": "",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Time",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "OUT",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #G",
                  "thresholds": [],
                  "type": "number",
                  "unit": "Bps"
                }
              ],
              "targets": [
                {
                  "expr": "histogram_quantile(0.50, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "refId": "C"
                },
                {
                  "expr": "histogram_quantile(0.90, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "refId": "D"
                },
                {
                  "expr": "histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (le, ingress))",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "{{ destination_service }}",
                  "refId": "E"
                },
                {
                  "expr": "sum(irate(nginx_ingress_controller_request_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "refId": "F"
                },
                {
                  "expr": "sum(irate(nginx_ingress_controller_response_size_sum{ingress!=\"\",controller_pod=~\"$controller\",controller_class=~\"$controller_class\",controller_namespace=~\"$namespace\",ingress=~\"$ingress\"}[2m])) by (ingress)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "{{ ingress }}",
                  "refId": "G"
                }
              ],
              "timeFrom": null,
              "title": "Ingress Percentile Response Times and Transfer Rates",
              "transform": "table",
              "type": "table"
            },
            {
              "columns": [
                {
                  "text": "Current",
                  "value": "current"
                }
              ],
              "datasource": "Prometheus",
              "fontSize": "100%",
              "gridPos": {
                "h": 8,
                "w": 24,
                "x": 0,
                "y": 24
              },
              "height": "1024",
              "id": 85,
              "links": [],
              "pageSize": 7,
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 1,
                "desc": false
              },
              "styles": [
                {
                  "alias": "Time",
                  "align": "auto",
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "pattern": "Time",
                  "type": "date"
                },
                {
                  "alias": "TTL",
                  "align": "auto",
                  "colorMode": "cell",
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "pattern": "Current",
                  "thresholds": [
                    "0",
                    "691200"
                  ],
                  "type": "number",
                  "unit": "s"
                },
                {
                  "alias": "",
                  "align": "auto",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "expr": "avg(nginx_ingress_controller_ssl_expire_time_seconds{kubernetes_pod_name=~\"$controller\",namespace=~\"$namespace\",ingress=~\"$ingress\"}) by (host) - time()",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "{{ host }}",
                  "metric": "gke_letsencrypt_cert_expiration",
                  "refId": "A",
                  "step": 1
                }
              ],
              "title": "Ingress Certificate Expiry",
              "transform": "timeseries_aggregations",
              "type": "table"
            }
          ],
          "refresh": "5s",
          "schemaVersion": 22,
          "style": "dark",
          "tags": [
            "nginx"
          ],
          "templating": {
            "list": [
              {
                "allValue": ".*",
                "current": {
                  "selected": false,
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "Prometheus",
                "definition": "",
                "hide": 0,
                "includeAll": true,
                "index": -1,
                "label": "Namespace",
                "multi": false,
                "name": "namespace",
                "options": [],
                "query": "label_values(nginx_ingress_controller_config_hash, controller_namespace)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": ".*",
                "current": {
                  "selected": false,
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "Prometheus",
                "definition": "",
                "hide": 0,
                "includeAll": true,
                "index": -1,
                "label": "Controller Class",
                "multi": false,
                "name": "controller_class",
                "options": [],
                "query": "label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\"}, controller_class) ",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": ".*",
                "current": {
                  "selected": false,
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "Prometheus",
                "definition": "",
                "hide": 0,
                "includeAll": true,
                "index": -1,
                "label": "Controller",
                "multi": false,
                "name": "controller",
                "options": [],
                "query": "label_values(nginx_ingress_controller_config_hash{namespace=~\"$namespace\",controller_class=~\"$controller_class\"}, controller_pod) ",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": ".*",
                "current": {
                  "selected": false,
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "Prometheus",
                "definition": "",
                "hide": 0,
                "includeAll": true,
                "index": -1,
                "label": "Ingress",
                "multi": false,
                "name": "ingress",
                "options": [],
                "query": "label_values(nginx_ingress_controller_requests{namespace=~\"$namespace\",controller_class=~\"$controller_class\",controller=~\"$controller\"}, ingress) ",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-1h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "2m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "browser",
          "title": "NGINX Ingress controller",
          "uid": "nginx",
          "variables": {
            "list": []
          },
          "version": 1
        }

    AzureMonitorViaPrometheus:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 2,
          "iteration": 1585320169649,
          "links": [],
          "panels": [
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Azure Monitor",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 0
              },
              "hiddenSeries": false,
              "id": 2,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "appInsights": {
                    "dimension": "none",
                    "metricName": "select",
                    "rawQuery": false,
                    "rawQueryString": "",
                    "timeColumn": "timestamp",
                    "timeGrain": "auto",
                    "valueColumn": ""
                  },
                  "azureLogAnalytics": {
                    "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"$metric\"\n| extend podName = tostring(parse_json(Tags).pod_name\r)\n| summarize metrics = percentile(Val,$percentile) by bin(TimeGenerated, $__interval), podName\r\n| order by TimeGenerated asc",
                    "resultFormat": "time_series",
                    "workspace": "0d163583-b901-4764-998a-065b52e55799"
                  },
                  "azureMonitor": {
                    "aggOptions": [],
                    "aggregation": "",
                    "dimension": "",
                    "dimensionFilter": "*",
                    "dimensions": [],
                    "metricDefinition": "Microsoft.OperationalInsights/workspaces",
                    "metricName": "select",
                    "metricNamespace": "Microsoft.OperationalInsights/workspaces",
                    "resourceGroup": "cloudnative-demo",
                    "resourceName": "logs-demo-e25wbosx",
                    "timeGrain": "",
                    "timeGrains": [],
                    "top": "10"
                  },
                  "queryType": "Azure Log Analytics",
                  "refId": "A",
                  "subscription": "a0f4a733-4fce-4d49-b8a8-d30541fc1b45"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Pod metrics via Prometheus",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "schemaVersion": 22,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "selected": true,
                  "text": "50",
                  "value": "50"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Percentile",
                "multi": false,
                "name": "percentile",
                "options": [
                  {
                    "selected": false,
                    "text": "50",
                    "value": "50"
                  },
                  {
                    "selected": false,
                    "text": "75",
                    "value": "75"
                  },
                  {
                    "selected": false,
                    "text": "80",
                    "value": "80"
                  },
                  {
                    "selected": false,
                    "text": "85",
                    "value": "85"
                  },
                  {
                    "selected": false,
                    "text": "90",
                    "value": "90"
                  },
                  {
                    "selected": false,
                    "text": "95",
                    "value": "95"
                  },
                  {
                    "selected": false,
                    "text": "96",
                    "value": "96"
                  },
                  {
                    "selected": false,
                    "text": "97",
                    "value": "97"
                  },
                  {
                    "selected": false,
                    "text": "98",
                    "value": "98"
                  },
                  {
                    "selected": false,
                    "text": "99",
                    "value": "99"
                  },
                  {
                    "selected": true,
                    "text": "99.9",
                    "value": "99.9"
                  }
                ],
                "query": "50,75,80,85,90,95,96,97,98,99,99.9",
                "skipUrlSync": false,
                "type": "custom"
              },
              {
                "allValue": null,
                "current": {
                  "selected": true,
                  "text": "myapp-spa",
                  "value": "myapp-spa"
                },
                "datasource": "Azure Monitor",
                "definition": "InsightsMetrics\n| where Namespace == \"prometheus\"\n| distinct tostring(parse_json(Tags).app)",
                "hide": 0,
                "includeAll": false,
                "index": -1,
                "label": "App",
                "multi": false,
                "name": "app",
                "options": [
                  {
                    "selected": true,
                    "text": "myapp-spa",
                    "value": "myapp-spa"
                  },
                  {
                    "selected": false,
                    "text": "ingress-azure",
                    "value": "ingress-azure"
                  }
                ],
                "query": "InsightsMetrics\n| where Namespace == \"prometheus\"\n| distinct tostring(parse_json(Tags).app)",
                "refresh": 0,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "selected": true,
                  "text": "appgw_ingress_controller_update_latency_seconds",
                  "value": "appgw_ingress_controller_update_latency_seconds"
                },
                "datasource": "Azure Monitor",
                "definition": "InsightsMetrics\n| where Namespace == \"prometheus\"\n| distinct Name",
                "hide": 0,
                "includeAll": false,
                "index": -1,
                "label": "Metric",
                "multi": false,
                "name": "metric",
                "options": [
                  {
                    "selected": false,
                    "text": "nginx_connections_waiting",
                    "value": "nginx_connections_waiting"
                  },
                  {
                    "selected": false,
                    "text": "nginx_http_requests_total",
                    "value": "nginx_http_requests_total"
                  },
                  {
                    "selected": false,
                    "text": "nginx_connections_reading",
                    "value": "nginx_connections_reading"
                  },
                  {
                    "selected": false,
                    "text": "nginx_connections_accepted",
                    "value": "nginx_connections_accepted"
                  },
                  {
                    "selected": false,
                    "text": "nginxexporter_build_info",
                    "value": "nginxexporter_build_info"
                  },
                  {
                    "selected": true,
                    "text": "nginx_connections_active",
                    "value": "nginx_connections_active"
                  },
                  {
                    "selected": false,
                    "text": "nginx_up",
                    "value": "nginx_up"
                  },
                  {
                    "selected": false,
                    "text": "nginx_connections_handled",
                    "value": "nginx_connections_handled"
                  },
                  {
                    "selected": false,
                    "text": "nginx_connections_writing",
                    "value": "nginx_connections_writing"
                  },
                  {
                    "selected": false,
                    "text": "promhttp_metric_handler_requests_total",
                    "value": "promhttp_metric_handler_requests_total"
                  },
                  {
                    "selected": false,
                    "text": "promhttp_metric_handler_requests_in_flight",
                    "value": "promhttp_metric_handler_requests_in_flight"
                  },
                  {
                    "selected": false,
                    "text": "appgw_ingress_controller_update_latency_seconds",
                    "value": "appgw_ingress_controller_update_latency_seconds"
                  },
                  {
                    "selected": false,
                    "text": "appgw_ingress_controller_k8s_api_event_counter",
                    "value": "appgw_ingress_controller_k8s_api_event_counter"
                  },
                  {
                    "selected": false,
                    "text": "appgw_ingress_controller_arm_api_update_call_success_counter",
                    "value": "appgw_ingress_controller_arm_api_update_call_success_counter"
                  },
                  {
                    "selected": false,
                    "text": "appgw_ingress_controller_arm_api_call_counter",
                    "value": "appgw_ingress_controller_arm_api_call_counter"
                  },
                  {
                    "selected": false,
                    "text": "appgw_ingress_controller_arm_api_update_call_failure_counter",
                    "value": "appgw_ingress_controller_arm_api_update_call_failure_counter"
                  }
                ],
                "query": "InsightsMetrics\n| where Namespace == \"prometheus\"\n| distinct Name",
                "refresh": 0,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-6h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ]
          },
          "timezone": "",
          "title": "Azure Monitor - Prometheus exports",
          "uid": "UARp309Wz",
          "variables": {
            "list": []
          },
          "version": 3
        }
    AKS:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Azure Monitor - Container Insights metrics for Kubernetes clusters. Cluster utilization, namespace utilization, Node cpu & memory, Node disk usage & disk io, node network & kubelet docker operation metrics. Many more metrics that are queriable from the log analytics workspace used by Azure monitor for containers!",
          "editable": true,
          "gnetId": 10956,
          "graphTooltip": 0,
          "id": 1,
          "iteration": 1585316879225,
          "links": [
            {
              "asDropdown": true,
              "icon": "external link",
              "includeVars": false,
              "keepTime": false,
              "tags": [],
              "targetBlank": true,
              "title": "Azure Monitor - Container Insights",
              "tooltip": "Click here to open Azure Monitor Ux for this cluster",
              "type": "link",
              "url": "https://portal.azure.com/#@microsoft.onmicrosoft.com/resource$clusterid/infrainsights"
            }
          ],
          "panels": [
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 44,
              "panels": [
                {
                  "datasource": "Azure Monitor",
                  "description": "% Allocatable CPU used across all nodes in the cluster",
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 1
                  },
                  "id": 4,
                  "options": {
                    "fieldOptions": {
                      "calcs": [
                        "mean"
                      ],
                      "defaults": {
                        "color": {
                          "mode": "thresholds"
                        },
                        "mappings": [],
                        "max": 100,
                        "min": 0,
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 80
                            }
                          ]
                        },
                        "unit": "percent"
                      },
                      "overrides": [],
                      "values": false
                    },
                    "orientation": "auto",
                    "showThresholdLabels": false,
                    "showThresholdMarkers": true
                  },
                  "pluginVersion": "6.7.1",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rlet allocatable = Perf | where ObjectName == \"K8SNode\" | where CounterName == \"cpuCapacityNanoCores\" \r\n| where $__timeFilter(TimeGenerated) \r\n| where InstanceName startswith '$clusterid'\n| summarize arg_max(TimeGenerated, * ) by Computer\r\n| summarize a=toreal(sum(CounterValue) /1000000)\r\n| project a, b=\"abc\";\r\n\r\nallocatable \r\n| join kind=inner (\r\n    Perf | where ObjectName == \"K8SNode\" | where CounterName == \"cpuUsageNanoCores\" \r\n    | where $__timeFilter(TimeGenerated) \r\n    | where InstanceName startswith '$clusterid'\n    | summarize arg_max(TimeGenerated, * ) by Computer\r\n    | summarize x=toreal(sum(CounterValue) /1000000)\r\n    | project x,y=\"abc\"\r\n) on $left.b == $right.y\r\n|project now(), (x/a) * 100",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Cluster CPU Utilization",
                  "type": "gauge"
                },
                {
                  "datasource": "Azure Monitor",
                  "description": "% Allocatable memory (workingset) used across all nodes in the cluster",
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 1
                  },
                  "id": 5,
                  "options": {
                    "fieldOptions": {
                      "calcs": [
                        "mean"
                      ],
                      "defaults": {
                        "color": {
                          "mode": "thresholds"
                        },
                        "mappings": [],
                        "max": 100,
                        "min": 0,
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 80
                            }
                          ]
                        },
                        "unit": "percent"
                      },
                      "overrides": [],
                      "values": false
                    },
                    "orientation": "auto",
                    "showThresholdLabels": false,
                    "showThresholdMarkers": true
                  },
                  "pluginVersion": "6.7.1",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\r\nlet allocatable = Perf | where ObjectName == \"K8SNode\" | where CounterName == \"memoryCapacityBytes\" \r\n| where $__timeFilter(TimeGenerated) \r\n| where InstanceName startswith '$clusterid'\n| summarize arg_max(TimeGenerated, * ) by Computer\r\n| summarize a=toreal(sum(CounterValue))\r\n| project a, b=\"abc\";\r\n\r\nallocatable \r\n| join kind=inner (\r\n    Perf | where ObjectName == \"K8SNode\" | where CounterName == \"memoryWorkingSetBytes\" \r\n    | where $__timeFilter(TimeGenerated) \r\n    | where InstanceName startswith '$clusterid'\n    | summarize arg_max(TimeGenerated, * ) by Computer\r\n    | summarize x=toreal(sum(CounterValue))\r\n    | project x,y=\"abc\"\r\n) on $left.b == $right.y\r\n|project now(), (x/a) * 100",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Cluster Memory Utilization",
                  "type": "gauge"
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Number of nodes in the cluster grouped by status",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 9,
                    "w": 8,
                    "x": 0,
                    "y": 9
                  },
                  "hiddenSeries": false,
                  "id": 11,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\r\nKubeNodeInventory\r\n| where ClusterId == '$clusterid'\n| where $__timeFilter(TimeGenerated)\n| summarize count() by bin(TimeGenerated, $__interval), Computer, Status\r\n| summarize arg_max(TimeGenerated, *) by Computer, Status\r\n| summarize nodecount=count() by Status\r\n| project nodecount, Status , now()",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Node count by Status",
                  "tooltip": {
                    "shared": false,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Pod count grouped by Pod Status",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 9,
                    "w": 8,
                    "x": 8,
                    "y": 9
                  },
                  "hiddenSeries": false,
                  "id": 12,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": [
                      {
                        "title": "",
                        "url": ""
                      }
                    ]
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "KubePodInventory | where ClusterId == '$clusterid'\n| where $__timeFilter(TimeGenerated)\r\n| summarize count() by bin(TimeGenerated, $__interval), PodUid, PodStatus\r\n| summarize arg_max(TimeGenerated, *) by PodUid, PodStatus\r\n| summarize podCount = count() by PodStatus\r\n| project podCount, PodStatus , now() \r\n",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Pod count by status",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Number of controllers in the cluster by Controller Kind",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 9,
                    "w": 8,
                    "x": 16,
                    "y": 9
                  },
                  "hiddenSeries": false,
                  "id": 16,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\r\nKubePodInventory | where ClusterId == '$clusterid' | where $__timeFilter(TimeGenerated) \n| summarize count() by bin(TimeGenerated, $__interval), PodUid, ControllerKind\r\n| summarize arg_max(TimeGenerated, *) by PodUid, ControllerKind\r\n| summarize controllerCount = count() by ControllerKind\r\n| extend ControllerKind=iif(isempty(ControllerKind), \"None\", ControllerKind)\n| project ControllerKind, controllerCount , now() ",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Controller count by Controller Kind",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "% Used Disk grouped by Disk in each node where usage > 80%",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 0,
                    "y": 18
                  },
                  "hiddenSeries": false,
                  "id": 6,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\r\nInsightsMetrics\r\n| extend tags=todynamic(Tags) \r\n| where Name ==\"used_percent\"\r\n| where tags[\"container.azm.ms/clusterId\"] == '$clusterid'\n| where $__timeFilter(TimeGenerated) \n| extend hostName=tags.hostName\r\n| extend device=tags.device\r\n| extend disk=strcat(device, \"/\" , hostName) \r\n| summarize arg_max(TimeGenerated, *) by disk\r\n| where Val > 80.0\n| sort by Val desc\n| project Val, disk, now()",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Node disks with > 80% used space",
                  "tooltip": {
                    "shared": false,
                    "sort": 2,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "repeat": "clusterid",
              "scopedVars": {
                "clusterid": {
                  "selected": true,
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                }
              },
              "title": "Cluster - Overview & utilization",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 1
              },
              "id": 42,
              "panels": [
                {
                  "cacheTimeout": null,
                  "colorBackground": false,
                  "colorPostfix": false,
                  "colorPrefix": false,
                  "colorValue": true,
                  "colors": [
                    "#37872D",
                    "rgba(237, 129, 40, 0.89)",
                    "#d44a3a"
                  ],
                  "datasource": "Azure Monitor",
                  "decimals": 0,
                  "description": "Number of namespaces in the cluster",
                  "format": "none",
                  "gauge": {
                    "maxValue": 100,
                    "minValue": 0,
                    "show": false,
                    "thresholdLabels": false,
                    "thresholdMarkers": true
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 3,
                    "x": 0,
                    "y": 2
                  },
                  "id": 7,
                  "interval": null,
                  "links": [],
                  "mappingType": 1,
                  "mappingTypes": [
                    {
                      "name": "value to text",
                      "value": 1
                    },
                    {
                      "name": "range to text",
                      "value": 2
                    }
                  ],
                  "maxDataPoints": 100,
                  "nullPointMode": "connected",
                  "nullText": null,
                  "options": {},
                  "pluginVersion": "6.3.3",
                  "postfix": "",
                  "postfixFontSize": "50%",
                  "prefix": "",
                  "prefixFontSize": "50%",
                  "rangeMaps": [
                    {
                      "from": "null",
                      "text": "N/A",
                      "to": "null"
                    }
                  ],
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "sparkline": {
                    "fillColor": "rgba(31, 118, 189, 0.18)",
                    "full": false,
                    "lineColor": "rgb(31, 120, 193)",
                    "show": false,
                    "ymax": null,
                    "ymin": null
                  },
                  "tableColumn": "",
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "KubePodInventory | where ClusterId == '$clusterid' \r| where $__timeFilter(TimeGenerated)\n| summarize count() by bin(TimeGenerated, $__interval), Namespace\r\n| summarize arg_max(TimeGenerated, *) by Namespace\r\n| summarize namespaceCount = count()\r\n| project namespaceCount,now() ",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": "",
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Kubernetes Namespace count",
                  "type": "singlestat",
                  "valueFontSize": "80%",
                  "valueMaps": [
                    {
                      "op": "=",
                      "text": "N/A",
                      "value": "null"
                    }
                  ],
                  "valueName": "current"
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Number of pods per namespace",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 6,
                    "x": 3,
                    "y": 2
                  },
                  "id": 10,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rKubePodInventory \n\r| where ClusterId == '$clusterid'\n| where $__timeFilter(TimeGenerated)\n| summarize count() by bin(TimeGenerated, $__interval), PodUid, Namespace\r\n| summarize arg_max(TimeGenerated, *) by PodUid, Namespace\r\n| summarize namespaceCount = count() by Namespace\r\n| sort by namespaceCount desc\n| project namespaceCount, Namespace, now() ",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Pod count by Kubernetes Namespace",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Number of controllers per namespace",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 7,
                    "x": 9,
                    "y": 2
                  },
                  "id": 53,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rKubePodInventory \n\r| where ClusterId == '$clusterid'\n| where $__timeFilter(TimeGenerated)\n| summarize count() by bin(TimeGenerated, $__interval), PodUid, Namespace\r, ControllerKind\n| summarize arg_max(TimeGenerated, *) by PodUid, Namespace\r, ControllerKind\n| summarize controllerCountByNamespace = count() by Namespace\r, ControllerKind\n| sort by controllerCountByNamespace desc\n| project controllerCountByNamespace, Namespace, now() \n\n",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Controller count by Kubernetes Namespace",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Number of controllers per namespace per kind",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 16,
                    "y": 2
                  },
                  "id": 54,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rKubePodInventory \n\r| where ClusterId == '$clusterid'\n| where $__timeFilter(TimeGenerated)\n| summarize count() by bin(TimeGenerated, $__interval), PodUid, Namespace\r, ControllerKind\n| summarize arg_max(TimeGenerated, *) by PodUid, nsc = strcat(Namespace\r,\"/\", ControllerKind)\n| summarize controllerCountByNamespace = count() by nsc\n| sort by controllerCountByNamespace desc\n| project controllerCountByNamespace, nsc, now() \n\n",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Controller Kind by Kubernetes Namespace (namespace/controllerkind)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "CPU % utilized by each namespace",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 10
                  },
                  "id": 17,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "let allocatable = Perf | where ObjectName == \"K8SNode\" | where CounterName == \"cpuCapacityNanoCores\" \r\n| where $__timeFilter(TimeGenerated) \r\n| where InstanceName startswith '$clusterid'\n| summarize arg_max(TimeGenerated, * ) by Computer\r\n| summarize a=toreal(sum(CounterValue))\r\n| project a, b=\"abc\";\r\n\r\nallocatable \r\n| join kind=inner (\r\n    Perf | where ObjectName == \"K8SContainer\" | where CounterName == \"cpuUsageNanoCores\" \r\n    | where $__timeFilter(TimeGenerated) \r\n    | where InstanceName startswith '$clusterid'\n    | extend cnameArr = split(InstanceName, \"/\")\r\n    | extend h=array_length(cnameArr)-1\r\n    | extend l=array_length(cnameArr)-2\r\n    | extend cname = strcat(cnameArr[l], \"/\", cnameArr[h])\r\n    | extend x= CounterValue \r\n    | summarize arg_max(TimeGenerated, * ) by cname // | summarize sum(x)\r\n    \r\n    //| summarize x=toreal(sum(CounterValue))\r\n    | project x,y=\"abc\", cname, TimeGenerated\r\n      | join kind=inner ( KubePodInventory\r\n      | where $__timeFilter(TimeGenerated) \r\n      | where ClusterId == '$clusterid'\n      | summarize arg_max(TimeGenerated, *) by ContainerName\r\n      | project ContainerName, Namespace\r\n      ) on $left.cname == $right.ContainerName//)\r\n) on $left.b == $right.y \r\n//| summarize v=arg_max(TimeGenerated,*) by cname,a, Namespace\r\n| summarize xyz= toreal(sum(x)) by a, Namespace\r\n| order by xyz desc\r\n|project now(), (xyz/a) * 100, Namespace \r\n",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Cluster CPU Utilization % by Kubernetes Namespace",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "decimals": -3,
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Memory usage (working set) by namespace",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 10
                  },
                  "id": 18,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": [
                      {
                        "title": "",
                        "url": ""
                      }
                    ]
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "let allocatable = Perf | where ObjectName == \"K8SNode\" | where CounterName == \"memoryCapacityBytes\" \r\n| where $__timeFilter(TimeGenerated) \r\n| where InstanceName startswith '$clusterid'\n| summarize arg_max(TimeGenerated, * ) by Computer\r\n| summarize a=toreal(sum(CounterValue))\r\n| project a, b=\"abc\";\r\n\r\nallocatable \r\n| join kind=inner (\r\n    Perf | where ObjectName == \"K8SContainer\" | where CounterName == \"memoryWorkingSetBytes\" \r\n    | where $__timeFilter(TimeGenerated) \r\n    | where InstanceName startswith '$clusterid'\n    | extend cnameArr = split(InstanceName, \"/\")\r\n    | extend h=array_length(cnameArr)-1\r\n    | extend l=array_length(cnameArr)-2\r\n    | extend cname = strcat(cnameArr[l], \"/\", cnameArr[h])\r\n    | extend x= CounterValue \r\n    | summarize arg_max(TimeGenerated, * ) by cname // | summarize sum(x)\r\n    \r\n    //| summarize x=toreal(sum(CounterValue))\r\n    | project x,y=\"abc\", cname, TimeGenerated\r\n      | join kind=inner ( KubePodInventory\r\n      | where $__timeFilter(TimeGenerated) \r\n      | where ClusterId == '$clusterid'\n      | summarize arg_max(TimeGenerated, *) by ContainerName\r\n      | project ContainerName, Namespace\r\n      ) on $left.cname == $right.ContainerName//)\r\n) on $left.b == $right.y \r\n//| summarize v=arg_max(TimeGenerated,*) by cname,a, Namespace\r\n| summarize xyz= toreal(sum(x)) by a, Namespace\r\n| order by xyz desc\r\n|project now(), (xyz/a) * 100, Namespace  ",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Cluster Memory Utilization % by Kubernetes Namespace",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "series",
                    "name": null,
                    "show": false,
                    "values": [
                      "total"
                    ]
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "repeat": "clusterid",
              "scopedVars": {
                "clusterid": {
                  "selected": true,
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                }
              },
              "title": "Cluster - Namespaces",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 2
              },
              "id": 40,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "",
                  "fill": 1,
                  "fillGradient": 10,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 3
                  },
                  "id": 20,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "let nodeCpuCapacity=Perf | where CounterName == \"cpuCapacityNanoCores\" | where ObjectName == \"K8SNode\" | where InstanceName startswith '$clusterid' | where $__timeFilter(TimeGenerated)| summarize arg_max(TimeGenerated, *) by Computer| project Computer , cpuCapacity=CounterValue; \n\nlet nodeCpuUsage=Perf | where CounterName == \"cpuUsageNanoCores\"| where ObjectName  == \"K8SNode\"| where InstanceName startswith '$clusterid'| where $__timeFilter(TimeGenerated) | summarize ptileCpuUsage=percentile(CounterValue, $ptile) by Computer, bin(TimeGenerated, $__interval);\n\nnodeCpuUsage|join kind=inner (nodeCpuCapacity) on $left.Computer == $right.Computer| extend ptileCpuUsagepercent=(ptileCpuUsage/cpuCapacity) * 100| order by TimeGenerated asc| project TimeGenerated, Computer, ptileCpuUsagepercent",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "$ptile-th Percentile % CPU usage by node",
                  "tooltip": {
                    "shared": true,
                    "sort": 1,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "fill": 1,
                  "fillGradient": 10,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 3
                  },
                  "id": 26,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "let nodeMemoryCapacity=Perf| where CounterName == \"memoryCapacityBytes\"| where ObjectName == \"K8SNode\" | where InstanceName startswith '$clusterid'| where $__timeFilter(TimeGenerated)| summarize arg_max(TimeGenerated, *) by Computer| project Computer , memoryCapacity=CounterValue;\n\nlet nodeMemoryUsage= Perf | where CounterName == \"memoryRssBytes\"| where ObjectName  == \"K8SNode\"| where InstanceName startswith '$clusterid'| where $__timeFilter(TimeGenerated) | summarize ptileMemoryUsage=percentile(CounterValue, $ptile) by Computer, bin(TimeGenerated, $__interval);\n\nnodeMemoryUsage|join kind=inner (nodeMemoryCapacity) on $left.Computer == $right.Computer| extend ptileMemoryUsagepercent=(ptileMemoryUsage/memoryCapacity) * 100| order by TimeGenerated asc| project TimeGenerated, Computer, ptileMemoryUsagepercent",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "$ptile-th Percentile Memory (rss) usage by node",
                  "tooltip": {
                    "shared": true,
                    "sort": 1,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": 0,
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "repeat": "clusterid",
              "scopedVars": {
                "clusterid": {
                  "selected": true,
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                }
              },
              "title": "Node - CPU & Memory",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 3
              },
              "id": 38,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "$ptile-th percentile, % Used Disk grouped by Disk in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 0,
                    "y": 12
                  },
                  "id": 28,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| extend tags=todynamic(Tags) \r\n| where Name ==\"used_percent\"\r\n| where tags[\"container.azm.ms/clusterId\"] == '$clusterid'\n| where $__timeFilter(TimeGenerated) \n| extend hostName=tags.hostName\r\n| extend device=tags.device\r\n| extend disk=strcat(device, \"/\" , hostName) \r\n| summarize ptileDiskUsagePercentagebyNodeDisk = percentile(Val,$ptile) by bin(TimeGenerated, $__interval), disk\r\n| order by TimeGenerated asc\n| project TimeGenerated, disk, ptileDiskUsagePercentagebyNodeDisk",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "% Used Disk ($ptile-th percentile) by Disk/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "percent",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "$ptile-th percentile iops in progress grouped by Disk in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 12,
                    "y": 12
                  },
                  "id": 30,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| extend tags=todynamic(Tags) \r\n| where Name ==\"iops_in_progress\"\r\n| where tags[\"container.azm.ms/clusterId\"] == '$clusterid'\r\n| where $__timeFilter(TimeGenerated) \n| extend hostName=tags.hostName\r\n| extend device=tags.name\n| extend disk=strcat(device, \"/\" , hostName) \r\n| summarize ptileDiskIopsInProgressbyNodeDisk = percentile(Val,$ptile) by bin(TimeGenerated, $__interval), disk\r\n| order by TimeGenerated asc\n| project TimeGenerated, disk, ptileDiskIopsInProgressbyNodeDisk",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": null,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "iops in progress ($ptile-th percentile) by Disk/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Reads/sec ($ptile-th percentile) grouped by Disk in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 0,
                    "y": 19
                  },
                  "id": 32,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/diskio'\r\n| where Name == 'reads'\r\n| where $__timeFilter(TimeGenerated) \n| extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), Device = tostring(Tags.name)\r, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])\n| where clusterId == '$clusterid'\n| extend NodeDisk = strcat(Device, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeDisk, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeDisk asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeDisk) != NodeDisk, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeDisk) != NodeDisk, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeDisk, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Disk reads/sec ($ptile-th percentile) by disk/node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Write bytes/sec ($ptile-th percentile) grouped by Disk in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 12,
                    "x": 12,
                    "y": 19
                  },
                  "id": 34,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/diskio'\r\n| where Name == 'write_bytes'\r\n| where $__timeFilter(TimeGenerated) \n| extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), Device = tostring(Tags.name)\r, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])\n| where clusterId == '$clusterid'\n| extend NodeDisk = strcat(Device, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeDisk, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeDisk asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeDisk) != NodeDisk, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeDisk) != NodeDisk, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeDisk, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Disk write bytes/sec ($ptile-th percentile) by disk/node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "Bps",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Node - Disk Usage & IO",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 4
              },
              "id": 36,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Sent bytes/sec ($ptile-th percentile) grouped by network interface in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 11,
                    "x": 0,
                    "y": 13
                  },
                  "id": 46,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/net'\r\n| where Name == 'bytes_sent'\r\n| where $__timeFilter(TimeGenerated) \n| extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), Interface = tostring(Tags.interface)\r, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])\n| where clusterId == '$clusterid'\n| extend NodeInterface = strcat(Interface, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeInterface, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeInterface asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeInterface) != NodeInterface, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeInterface) != NodeInterface, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeInterface, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Network sent bytes/sec ($ptile-th percentile) by interface/node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "Bps",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Received bytes/sec ($ptile-th percentile) grouped by network interface in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 13,
                    "x": 11,
                    "y": 13
                  },
                  "id": 48,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/net'\r\n| where Name == 'bytes_recv'\r\n| where $__timeFilter(TimeGenerated) \n| extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), Interface = tostring(Tags.interface)\r, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])\n| where clusterId == '$clusterid'\n| extend NodeInterface = strcat(Interface, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeInterface, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeInterface asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeInterface) != NodeInterface, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeInterface) != NodeInterface, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeInterface, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Network received bytes/sec ($ptile-th percentile)  by interface/node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "Bps",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Network send errors ($ptile-th percentile) grouped by interface in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 6,
                    "w": 11,
                    "x": 0,
                    "y": 20
                  },
                  "id": 50,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| extend tags=todynamic(Tags) \r\n| where Name ==\"err_out\"\r\n| where tags[\"container.azm.ms/clusterId\"] == '$clusterid'\n| where $__timeFilter(TimeGenerated) \n| extend hostName=tags.hostName\n| extend interface=tags.interface\n| extend nodeInterface=strcat(interface, \"/\" , hostName) \r\n| summarize ptileErrorsOutByNodeInterface = percentile(Val,$ptile) by bin(TimeGenerated, $__interval), nodeInterface\n| order by TimeGenerated asc\n| project TimeGenerated, nodeInterface, ptileErrorsOutByNodeInterface",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Network send errors ($ptile-th percentle) by Interface/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Network receive errors ($ptile-th percentile) grouped by interface in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 13,
                    "x": 11,
                    "y": 20
                  },
                  "id": 52,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "\rInsightsMetrics\r\n| extend tags=todynamic(Tags) \r\n| where Name ==\"err_in\"\r\n| where tags[\"container.azm.ms/clusterId\"] == '$clusterid'\n| where $__timeFilter(TimeGenerated) \n| extend hostName=tags.hostName\n| extend interface=tags.interface\n| extend nodeInterface=strcat(interface, \"/\" , hostName) \r\n| summarize ptileErrorsInByNodeInterface = percentile(Val,$ptile) by bin(TimeGenerated, $__interval), nodeInterface\n| order by TimeGenerated asc\n| project TimeGenerated, nodeInterface, ptileErrorsInByNodeInterface",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [
                    {
                      "colorMode": "critical",
                      "fill": true,
                      "line": true,
                      "op": "gt",
                      "value": 80,
                      "yaxis": "left"
                    }
                  ],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Network receive errors ($ptile-th percentle) by Interface/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "repeat": "clusterid",
              "scopedVars": {
                "clusterid": {
                  "selected": true,
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                }
              },
              "title": "Node - Network",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 5
              },
              "id": 22,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Docker Operations/sec ($ptile-th percentile) grouped by operation in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 11,
                    "w": 12,
                    "x": 0,
                    "y": 14
                  },
                  "id": 55,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "InsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/prometheus'\r\n| where Name == 'kubelet_docker_operations'\r\n| where $__timeFilter(TimeGenerated) | extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), optype = tostring(Tags.operation_type)\r\n, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])| where clusterId == '$clusterid'| extend NodeOp = strcat(optype, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeOp, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeOp asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeOp) != NodeOp, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeOp) != NodeOp, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeOp, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A",
                      "subscription": ""
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Kubelet Docker Ops/Sec ($ptile-th percentile) by operation/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "cacheTimeout": null,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Azure Monitor",
                  "description": "Docker Operation errors/sec ($ptile-th percentile) grouped by operation in each node",
                  "fill": 0,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 11,
                    "w": 12,
                    "x": 12,
                    "y": 14
                  },
                  "id": 56,
                  "legend": {
                    "alignAsTable": true,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": true,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 2,
                  "links": [],
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.3.3",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "scopedVars": {
                    "clusterid": {
                      "selected": true,
                      "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                      "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                    }
                  },
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "appInsights": {
                        "groupBy": "none",
                        "metricName": "select",
                        "rawQuery": false,
                        "rawQueryString": "",
                        "spliton": "",
                        "timeGrainType": "auto",
                        "xaxis": "timestamp",
                        "yaxis": ""
                      },
                      "azureLogAnalytics": {
                        "query": "InsightsMetrics\r\n| where Origin == 'container.azm.ms/telegraf'\r\n| where Namespace == 'container.azm.ms/prometheus'\r\n| where Name == 'kubelet_docker_operations_errors'\r\n| where $__timeFilter(TimeGenerated) | extend Tags = todynamic(Tags)\r\n| extend HostName = tostring(Tags.hostName), optype = tostring(Tags.operation_type)\r\n, clusterId = tostring(Tags[\"container.azm.ms/clusterId\"])| where clusterId == '$clusterid'| extend NodeOp = strcat(optype, \"/\", HostName)\r\n| summarize Val=percentile(Val,$ptile) by NodeOp, TimeGenerated=bin(TimeGenerated,$__interval)\r\n| order by NodeOp asc, TimeGenerated asc\r\n| serialize\r\n| extend PrevVal = iif(prev(NodeOp) != NodeOp, 0.0, prev(Val)), PrevTimeGenerated = iif(prev(NodeOp) != NodeOp, datetime(null), prev(TimeGenerated))\r\n| where isnotnull(PrevTimeGenerated) and PrevTimeGenerated != TimeGenerated\r\n| extend Rate = iif(PrevVal > Val, Val / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1), iif(PrevVal == Val, 0.0, (Val - PrevVal) / (datetime_diff('Second', TimeGenerated, PrevTimeGenerated) * 1)))\r\n| where isnotnull(Rate)\r\n| project TimeGenerated, NodeOp, Rate\r\n|render timechart",
                        "resultFormat": "time_series",
                        "workspace": ""
                      },
                      "azureMonitor": {
                        "dimensionFilter": "*",
                        "metricDefinition": "select",
                        "metricName": "select",
                        "metricNamespace": "select",
                        "resourceGroup": "select",
                        "resourceName": "select",
                        "timeGrain": "auto"
                      },
                      "queryType": "Azure Log Analytics",
                      "refId": "A"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Kubelet Docker operation errors/Sec ($ptile-th percentile) by operation/Node",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "transparent": true,
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": null,
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "repeat": "clusterid",
              "scopedVars": {
                "clusterid": {
                  "selected": true,
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                }
              },
              "title": "Node - Kubelet Docker Operations",
              "type": "row"
            }
          ],
          "schemaVersion": 22,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "text": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx",
                  "value": "/subscriptions/a0f4a733-4fce-4d49-b8a8-d30541fc1b45/resourceGroups/cloudnative-demo/providers/Microsoft.ContainerService/managedClusters/aks-demo-e25wbosx"
                },
                "datasource": "Azure Monitor",
                "definition": "KubePodInventory | summarize n=count() by ClusterId |project ClusterId ",
                "hide": 0,
                "includeAll": false,
                "index": -1,
                "label": "Cluster",
                "multi": false,
                "name": "clusterid",
                "options": [],
                "query": "KubePodInventory | summarize n=count() by ClusterId |project ClusterId ",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": true
              },
              {
                "allValue": null,
                "current": {
                  "tags": [],
                  "text": "99",
                  "value": "99"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Percentile (applicable for percentile charts)",
                "multi": false,
                "name": "ptile",
                "options": [
                  {
                    "selected": false,
                    "text": "50",
                    "value": "50"
                  },
                  {
                    "selected": false,
                    "text": "75",
                    "value": "75"
                  },
                  {
                    "selected": false,
                    "text": "80",
                    "value": "80"
                  },
                  {
                    "selected": false,
                    "text": "85",
                    "value": "85"
                  },
                  {
                    "selected": false,
                    "text": "90",
                    "value": "90"
                  },
                  {
                    "selected": false,
                    "text": "95",
                    "value": "95"
                  },
                  {
                    "selected": false,
                    "text": "96",
                    "value": "96"
                  },
                  {
                    "selected": false,
                    "text": "97",
                    "value": "97"
                  },
                  {
                    "selected": false,
                    "text": "98",
                    "value": "98"
                  },
                  {
                    "selected": true,
                    "text": "99",
                    "value": "99"
                  },
                  {
                    "selected": false,
                    "text": "99.9",
                    "value": "99.9"
                  }
                ],
                "query": "50,75,80,85,90,95,96,97,98,99,99.9",
                "skipUrlSync": false,
                "type": "custom"
              }
            ]
          },
          "time": {
            "from": "now-6h",
            "to": "now"
          },
          "timepicker": {
            "hidden": false,
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ]
          },
          "timezone": "",
          "title": "Azure Monitor for Containers - Metrics",
          "uid": "vFsw3edZk",
          "variables": {
            "list": []
          },
          "version": 2
        }
    DAPR-system:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 1,
          "links": [],
          "panels": [
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 18,
              "panels": [],
              "title": "Health & Resource",
              "type": "row"
            },
            {
              "cacheTimeout": null,
              "datasource": "Prometheus",
              "gridPos": {
                "h": 8,
                "w": 4,
                "x": 0,
                "y": 1
              },
              "id": 20,
              "links": [],
              "options": {
                "colorMode": "value",
                "fieldOptions": {
                  "calcs": [
                    "last"
                  ],
                  "defaults": {
                    "decimals": 1,
                    "mappings": [
                      {
                        "id": 0,
                        "op": "=",
                        "text": "N/A",
                        "type": 1,
                        "value": "null"
                      }
                    ],
                    "nullValueMode": "connected",
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "red",
                          "value": null
                        },
                        {
                          "color": "green",
                          "value": 600
                        }
                      ]
                    },
                    "unit": "s"
                  },
                  "overrides": [],
                  "values": false
                },
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "horizontal"
              },
              "pluginVersion": "6.6.2",
              "targets": [
                {
                  "expr": "time() - max(process_start_time_seconds{app=~\"dapr-sentry|dapr-placement|dapr-sidecar-injector|dapr-operator\"}) by (app)",
                  "intervalFactor": 2,
                  "legendFormat": "{{app}}",
                  "refId": "A"
                }
              ],
              "timeFrom": null,
              "timeShift": null,
              "title": "Uptime",
              "type": "stat"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "This shows total amount of kernel and user CPU usage time.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 7,
                "x": 4,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 22,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(rate(container_cpu_usage_seconds_total{pod=~\"(dapr-sentry|dapr-sidecar-injector|dapr-placement|dapr-operator).*\"}[5m])) by (pod)",
                  "legendFormat": "{{pod}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Total CPU usage (kernel and user)",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "The amount of memory that belongs specifically to that process in bytes. This excludes swapped out memory pages.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 7,
                "x": 11,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 24,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "max(process_resident_memory_bytes{app=~\"(dapr-sentry|dapr-sidecar-injector|dapr-placement|dapr-operator)\"}) by (app)",
                  "legendFormat": "{{app}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Memory usage in bytes",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 6,
                "x": 18,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 26,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "max(go_goroutines{app=~\"(dapr-sentry|dapr-sidecar-injector|dapr-placement|dapr-operator)\"}) by (app)",
                  "legendFormat": "{{app}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Number of GO routines",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 9
              },
              "id": 14,
              "panels": [],
              "title": "Operator",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The total number of services created.",
              "fill": 10,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 10
              },
              "hiddenSeries": false,
              "id": 6,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": true,
              "targets": [
                {
                  "expr": "count(dapr_operator_service_created_total) by (app_id)",
                  "legendFormat": "{{app_id}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# Services Created",
              "tooltip": {
                "shared": true,
                "sort": 1,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "The total number of services deleted.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 10
              },
              "hiddenSeries": false,
              "id": 4,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_operator_service_deleted_total",
                  "legendFormat": "{{app_id}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# Services Deleted",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 18
              },
              "id": 12,
              "panels": [],
              "title": "Sidecar Injector",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The total number of sidecar injection requests.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 19
              },
              "hiddenSeries": false,
              "id": 8,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_injector_sidecar_injection_requests_total",
                  "legendFormat": "sidecars requests",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# sidecar injection requests",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "The total number of successful sidecar injection requests.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 19
              },
              "hiddenSeries": false,
              "id": 10,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pluginVersion": "6.6.2",
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_injector_sidecar_injection_succeeded_total",
                  "legendFormat": "{{app_id}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# successful sidecar injected",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 28
              },
              "id": 42,
              "panels": [],
              "title": "CA Sentry",
              "type": "row"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "#F2495C",
                "#FADE2A",
                "#73BF69"
              ],
              "datasource": null,
              "decimals": null,
              "description": "",
              "format": "s",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 7,
                "w": 3,
                "x": 0,
                "y": 29
              },
              "id": 44,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "options": {},
              "pluginVersion": "6.6.2",
              "postfix": " left",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": true,
                "ymax": null,
                "ymin": null
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "min(dapr_sentry_issuercert_expiry_timestamp) - time()",
                  "refId": "A"
                }
              ],
              "thresholds": "2628000, 5256000",
              "timeFrom": "1m",
              "timeShift": null,
              "title": "Root/Issuer cert expiry",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "Certificate Signing Request ( CSR ) from Dapr runtime",
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 3,
                "y": 29
              },
              "hiddenSeries": false,
              "id": 34,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 2,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "CSR Requests",
                  "color": "rgb(60, 33, 166)",
                  "dashes": true
                },
                {
                  "alias": "CSR Success",
                  "color": "#73BF69"
                },
                {
                  "alias": "CSR Failure",
                  "color": "#F2495C"
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(dapr_sentry_cert_sign_request_received_total{app=\"dapr-sentry\"})",
                  "legendFormat": "CSR Requests",
                  "refId": "A"
                },
                {
                  "expr": "sum(dapr_sentry_cert_sign_success_total{app=\"dapr-sentry\"})",
                  "instant": false,
                  "legendFormat": "CSR Success",
                  "refId": "B"
                },
                {
                  "expr": "sum(dapr_sentry_cert_sign_failure_total{app=\"dapr-sentry\"})",
                  "instant": false,
                  "legendFormat": "CSR Failure",
                  "refId": "C"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Certificate Signing Requests (CSR) from Daprd",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "This chart shows the failure reason of Certificate Sign Request.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 29
              },
              "hiddenSeries": false,
              "id": 38,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(dapr_sentry_cert_sign_failure_total{app=\"dapr-sentry\"}) by (reason)",
                  "legendFormat": "{{reason}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "CSR Failures",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "cacheTimeout": null,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "This will be counted when issuer cert and key are changed.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 36
              },
              "hiddenSeries": false,
              "id": 36,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pluginVersion": "6.6.2",
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(dapr_sentry_issuercert_changed_total{app=\"dapr-sentry\"})",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Issuer cert and key changed total",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "This chart shows the reason of gRPC server TLS certificate issuance failures.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 36
              },
              "hiddenSeries": false,
              "id": 40,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(dapr_sentry_servercert_issue_failed_total{app=\"dapr-sentry\"}) by (reason)",
                  "legendFormat": "{{reason}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Server TLS certificate issuance failures",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 43
              },
              "id": 16,
              "panels": [],
              "title": "Placement",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The total number of replicas connected to placement service.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 44
              },
              "hiddenSeries": false,
              "id": 28,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_placement_hosts_total",
                  "legendFormat": "hosts",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# total replicas",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The total number of replicas which are not hosting actors.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 44
              },
              "hiddenSeries": false,
              "id": 30,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_placement_nonactorhosts_total",
                  "legendFormat": "{{kubernetes_pod_name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# replicas not hosting actors",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The total number of actor types registered with Dapr runtime.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 52
              },
              "hiddenSeries": false,
              "id": 32,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "dapr_placement_actortypes_total",
                  "legendFormat": "actor types",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "# actor types",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": "15m",
          "schemaVersion": 22,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": []
          },
          "time": {
            "from": "now-1h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ]
          },
          "timezone": "",
          "title": "Dapr System Services Dashboard",
          "uid": "RHSwiHXWk",
          "version": 2
        }
    DAPR-sidecar:
      json: |
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "Prometheus",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "limit": 100,
                "name": "Annotations & Alerts",
                "showIn": 0,
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 15,
          "iteration": 1585841779452,
          "links": [],
          "panels": [
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 16,
              "panels": [],
              "title": "Health monitor",
              "type": "row"
            },
            {
              "cacheTimeout": null,
              "datasource": null,
              "description": "This shows the uptime of dapr runtime sidecar. If the sidecar is running for less than 10 minutes, the color will turn into RED.",
              "gridPos": {
                "h": 4,
                "w": 12,
                "x": 0,
                "y": 1
              },
              "id": 70,
              "links": [],
              "options": {
                "colorMode": "value",
                "fieldOptions": {
                  "calcs": [
                    "last"
                  ],
                  "defaults": {
                    "decimals": 2,
                    "mappings": [
                      {
                        "id": 0,
                        "op": "=",
                        "text": "N/A",
                        "type": 1,
                        "value": "null"
                      }
                    ],
                    "nullValueMode": "connected",
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "red",
                          "value": null
                        },
                        {
                          "color": "green",
                          "value": 600
                        }
                      ]
                    },
                    "title": "",
                    "unit": "s"
                  },
                  "overrides": [],
                  "values": false
                },
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "vertical"
              },
              "pluginVersion": "6.6.2",
              "targets": [
                {
                  "expr": "time() - max(process_start_time_seconds{kubernetes_name=~\"($dapr_app_id)-dapr\", kubernetes_namespace=\"$namespace\"}) by (kubernetes_name)",
                  "legendFormat": "{{kubernetes_name}}",
                  "refId": "A"
                }
              ],
              "timeFrom": "5m",
              "timeShift": null,
              "title": "Sidecar uptime",
              "type": "stat"
            },
            {
              "collapsed": false,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 5
              },
              "id": 72,
              "panels": [],
              "title": "Resource usage",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "This shows total amount of Kernel and user CPU usage for Daprd.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 6,
                "x": 0,
                "y": 6
              },
              "hiddenSeries": false,
              "id": 9,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(rate(container_cpu_usage_seconds_total{pod_name=~\"($dapr_app_id).*\", namespace=\"$namespace\"}[5m])) by (pod_name)",
                  "legendFormat": "{{pod_name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Total CPU usage (Kernel and User)",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 6,
                "x": 6,
                "y": 6
              },
              "hiddenSeries": false,
              "id": 11,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(go_goroutines{kubernetes_name=~\"($dapr_app_id)-dapr.*\", kubernetes_namespace=\"$namespace\"}) by (kubernetes_name)",
                  "legendFormat": "{{kubernetes_name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Number of GO routines",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "Prometheus",
              "description": "The amount of memory that belongs specifically to that process in bytes. This excludes swapped out memory pages.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 6,
                "x": 12,
                "y": 6
              },
              "hiddenSeries": false,
              "id": 10,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(process_resident_memory_bytes{kubernetes_name=~\"($dapr_app_id)-dapr\", kubernetes_namespace=\"$namespace\"}) by (kubernetes_name)",
                  "legendFormat": "{{kubernetes_name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Memory usage in bytes",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": null,
              "description": "The amount of address space that a process is managing. This includes all types of memory, both in RAM and swapped out.",
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 8,
                "w": 6,
                "x": 18,
                "y": 6
              },
              "hiddenSeries": false,
              "id": 12,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "nullPointMode": "null",
              "options": {
                "dataLinks": []
              },
              "percentage": false,
              "pointradius": 2,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(process_virtual_memory_bytes{kubernetes_name=~\"($dapr_app_id)-dapr\", kubernetes_namespace=\"$namespace\"}) by (kubernetes_name)",
                  "legendFormat": "{{kubernetes_name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Managed virtual memory in bytes",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 1,
                  "format": "decbytes",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 14
              },
              "id": 21,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows the turn-around latency when user app calls Dapr API. For example, you can understand each statestore and service invocation performance.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 7
                  },
                  "hiddenSeries": false,
                  "id": 19,
                  "legend": {
                    "alignAsTable": false,
                    "avg": false,
                    "current": true,
                    "max": false,
                    "min": false,
                    "rightSide": false,
                    "show": true,
                    "sideWidth": 150,
                    "total": false,
                    "values": true
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.6.2",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "histogram_quantile(0.95, sum(rate(dapr_http_server_latency_bucket{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, method, path))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "[95p] {{method}} {{path}} ({{app_id}})",
                      "refId": "A"
                    },
                    {
                      "expr": "histogram_quantile(0.75, sum(rate(dapr_http_server_latency_bucket{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, method, path))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "[75p] {{method}} {{path}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Outbound request latency (App->Dapr) (95p, 75p)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": 2,
                      "format": "ms",
                      "label": "",
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows completed request rate (rps) when User app calls Dapr.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 7
                  },
                  "hiddenSeries": false,
                  "id": 31,
                  "legend": {
                    "alignAsTable": false,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": false,
                    "show": true,
                    "sideWidth": 150,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.6.2",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum by (app_id, method, path) (rate(dapr_http_server_response_count{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m]))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "{{method}} {{path}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Outbound request rate (App -> Dapr) (RPS)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": 2,
                      "format": "reqps",
                      "label": "",
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows the inbound request latency from Dapr to App. You can analyze App's API endpoint performance.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 15
                  },
                  "hiddenSeries": false,
                  "id": 18,
                  "legend": {
                    "avg": false,
                    "current": true,
                    "max": false,
                    "min": false,
                    "rightSide": false,
                    "show": true,
                    "sideWidth": 150,
                    "total": false,
                    "values": true
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.6.2",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "histogram_quantile(0.95, sum(rate(dapr_http_client_roundtrip_latency_bucket{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, method, path))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "[95p] {{method}} /{{path}} ({{app_id}})",
                      "refId": "A"
                    },
                    {
                      "expr": "histogram_quantile(0.75, sum(rate(dapr_http_client_roundtrip_latency_bucket{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, method, path))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "[75p] {{method}} /{{path}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Inbound request latency (Dapr -> App) (95p, 75p)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": 2,
                      "format": "ms",
                      "label": "",
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows request rate (rps) when Dapr runtime calls User app HTTP endpoints.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 15
                  },
                  "hiddenSeries": false,
                  "id": 32,
                  "legend": {
                    "alignAsTable": false,
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": false,
                    "show": true,
                    "sideWidth": 150,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.6.2",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum by (app_id, method, path) (rate(dapr_http_client_completed_count{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m]))",
                      "format": "time_series",
                      "instant": false,
                      "legendFormat": "{{method}} {{path}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Inbound request rate (Dapr -> App) (RPS)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "decimals": 2,
                      "format": "reqps",
                      "label": "",
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Throughput/Latency - HTTP",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 15
              },
              "id": 34,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows the turn-around latency when user app calls Dapr API. For example, you can understand each statestore and service invocation performance.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 8
                  },
                  "hiddenSeries": false,
                  "id": 36,
                  "legend": {
                    "avg": false,
                    "current": true,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": true
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "histogram_quantile(0.95, sum(rate(dapr_grpc_io_server_server_latency_bucket{app_id=~\"$dapr_app_id\", grpc_server_method=~\"dapr.Dapr/.*\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, grpc_server_method))",
                      "legendFormat": "[95p] - {{grpc_server_method}} ({{app_id}})",
                      "refId": "A"
                    },
                    {
                      "expr": "histogram_quantile(0.75, sum(rate(dapr_grpc_io_server_server_latency_bucket{app_id=~\"$dapr_app_id\", grpc_server_method=~\"dapr.Dapr/.*\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, grpc_server_method))",
                      "legendFormat": "[75p] {{grpc_server_method}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Outbound request latency (App->Dapr) (95p, 75p)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "ms",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows completed request rate (rps) when User app calls Dapr.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 8
                  },
                  "hiddenSeries": false,
                  "id": 38,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum by (app_id, grpc_server_method, grpc_server_status) (rate(dapr_grpc_io_server_completed_rpcs{app_id=~\"$dapr_app_id\", grpc_server_method=~\"dapr.Dapr/.*\"}[5m]))",
                      "legendFormat": "{{grpc_server_status}} {{grpc_server_method}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Outbound request rate (App -> Dapr) (RPS)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "reqps",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows the inbound request latency from Dapr to App. You can analyze App's API endpoint performance.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 16
                  },
                  "hiddenSeries": false,
                  "id": 40,
                  "legend": {
                    "avg": false,
                    "current": true,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": true
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "histogram_quantile(0.95, sum(rate(dapr_grpc_io_client_roundtrip_latency_bucket{app_id=~\"$dapr_app_id\", grpc_client_method=~\"daprclient.DaprClient/.*\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, grpc_client_method))",
                      "legendFormat": "[95p] {{grpc_client_method}} ({{app_id}})",
                      "refId": "A"
                    },
                    {
                      "expr": "histogram_quantile(0.75, sum(rate(dapr_grpc_io_client_roundtrip_latency_bucket{app_id=~\"$dapr_app_id\", grpc_client_method=~\"daprclient.DaprClient/.*\", kubernetes_namespace=\"$namespace\"}[5m])) by (le, app_id, grpc_client_method))",
                      "legendFormat": "[75p] {{grpc_client_method}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Inbound request latency (Dapr -> App) (95p, 75p)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "ms",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "Prometheus",
                  "description": "This charts shows request rate (rps) when Dapr runtime calls User app gRPC endpoints.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 16
                  },
                  "hiddenSeries": false,
                  "id": 42,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum by (app_id, grpc_client_method, grpc_client_status) (rate(dapr_grpc_io_client_roundtrip_latency_bucket{app_id=~\"$dapr_app_id\", grpc_client_method=~\"daprclient.DaprClient/.*\", kubernetes_namespace=\"$namespace\"}[5m]))",
                      "legendFormat": "{{grpc_client_status}} {{grpc_client_method}} ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Inbound request rate (Dapr -> App) (RPS)",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "reqps",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Throughput/Latency - gRPC",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 16
              },
              "id": 52,
              "panels": [
                {
                  "datasource": null,
                  "description": "This shows the number of configured components. For example, it will shows \"2\" if you configure redis statestore and redis pubsub components. ",
                  "gridPos": {
                    "h": 8,
                    "w": 6,
                    "x": 0,
                    "y": 9
                  },
                  "id": 56,
                  "options": {
                    "colorMode": "value",
                    "fieldOptions": {
                      "calcs": [
                        "last"
                      ],
                      "defaults": {
                        "mappings": [],
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 80
                            }
                          ]
                        }
                      },
                      "overrides": [],
                      "values": false
                    },
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "horizontal"
                  },
                  "pluginVersion": "6.6.2",
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_component_loaded{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id)",
                      "legendFormat": "{{app_id}}",
                      "refId": "A"
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Loaded component configurations",
                  "type": "stat"
                },
                {
                  "cacheTimeout": null,
                  "datasource": null,
                  "description": "This shows the number of initialized components. This number must be the same as loaded components. Otherwise, Daprd fails to initialize some of components.",
                  "gridPos": {
                    "h": 8,
                    "w": 6,
                    "x": 6,
                    "y": 9
                  },
                  "id": 54,
                  "links": [],
                  "options": {
                    "colorMode": "value",
                    "fieldOptions": {
                      "calcs": [
                        "last"
                      ],
                      "defaults": {
                        "mappings": [
                          {
                            "id": 0,
                            "op": "=",
                            "text": "N/A",
                            "type": 1,
                            "value": "null"
                          }
                        ],
                        "nullValueMode": "connected",
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 80
                            }
                          ]
                        },
                        "unit": "none"
                      },
                      "overrides": [],
                      "values": false
                    },
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "horizontal"
                  },
                  "pluginVersion": "6.6.2",
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_component_init_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id)",
                      "legendFormat": "{{app_id}}",
                      "refId": "A"
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Initialized components",
                  "type": "stat"
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This chart shows the number component initialization failures with the reasons.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 9
                  },
                  "hiddenSeries": false,
                  "id": 58,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "rightSide": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_component_init_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id, reason)",
                      "legendFormat": "{{app_id}} - {{reason}}",
                      "refId": "A"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Component failures",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Components",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 17
              },
              "id": 44,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This chart shows how many actors are activated.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 10
                  },
                  "hiddenSeries": false,
                  "id": 64,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 1,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "dapr_runtime_actor_activated_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}",
                      "legendFormat": "OK {{actor_type}}",
                      "refId": "A"
                    },
                    {
                      "expr": "dapr_runtime_actor_activated_failed_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}",
                      "legendFormat": "Error {{actor_type}}",
                      "refId": "C"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Actor Activation",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This chart shows how many actors are deactivated.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 8,
                    "y": 10
                  },
                  "hiddenSeries": false,
                  "id": 65,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 1,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "dapr_runtime_actor_deactivated_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}",
                      "legendFormat": "OK {{actor_type}}",
                      "refId": "A"
                    },
                    {
                      "expr": "dapr_runtime_actor_deactivated_failed_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}",
                      "legendFormat": "Error {{actor_type}}",
                      "refId": "C"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Actor Deactivation",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This shows when actor is rebalanced. This operation can make the activated actors deactivated and move actor to the other hosts.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 16,
                    "y": 10
                  },
                  "hiddenSeries": false,
                  "id": 63,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 1,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "dapr_runtime_actor_rebalanced_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}",
                      "intervalFactor": 1,
                      "legendFormat": "{{app_id}}",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Actor table rebalancing",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {},
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This shows when Daprd reports host status to placement service. Non-Actor service reports host status in the beginning. Actor service reports host status to placement periodically. If there is a failure, virtual actors will not be distributed properly.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 9,
                    "x": 0,
                    "y": 17
                  },
                  "hiddenSeries": false,
                  "id": 46,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": true,
                  "targets": [
                    {
                      "expr": "rate(dapr_runtime_actor_status_report_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "legendFormat": "OK ({{app_id}})",
                      "refId": "A"
                    },
                    {
                      "expr": "rate(dapr_runtime_actor_status_report_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "legendFormat": "Error ({{app_id}})",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Status report status",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "none",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "cacheTimeout": null,
                  "datasource": null,
                  "description": "This shows the failures when Daprd reports host status to placement.",
                  "gridPos": {
                    "h": 7,
                    "w": 5,
                    "x": 9,
                    "y": 17
                  },
                  "id": 59,
                  "links": [],
                  "options": {
                    "displayMode": "basic",
                    "fieldOptions": {
                      "calcs": [
                        "max"
                      ],
                      "defaults": {
                        "mappings": [],
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 10
                            }
                          ]
                        }
                      },
                      "overrides": [],
                      "values": false
                    },
                    "orientation": "horizontal",
                    "showUnfilled": true
                  },
                  "pluginVersion": "6.6.2",
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_actor_status_report_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id, operation)",
                      "legendFormat": "{{operation}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Report status error reasons",
                  "type": "bargauge"
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This shows the placement table update status based on the response from placement service. Daprd maintains the actor placement table in its memory. This table is periodically updated.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 10,
                    "x": 14,
                    "y": 17
                  },
                  "hiddenSeries": false,
                  "id": 61,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 1,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": true,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_actor_table_operation_recv_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id, operation)",
                      "format": "time_series",
                      "intervalFactor": 3,
                      "legendFormat": "{{operation}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Placement table operation",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Actor",
              "type": "row"
            },
            {
              "collapsed": true,
              "datasource": null,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 18
              },
              "id": 50,
              "panels": [
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This chart  shows when mTLS is initialized, which means root cert is loaded and workload cert is issued from sentry, when runtime starts.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 7,
                    "x": 0,
                    "y": 11
                  },
                  "hiddenSeries": false,
                  "id": 48,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(dapr_runtime_mtls_init_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "intervalFactor": 2,
                      "legendFormat": "OK {{app_id}}",
                      "refId": "A"
                    },
                    {
                      "expr": "rate(dapr_runtime_mtls_init_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "intervalFactor": 2,
                      "legendFormat": "Error {{app_id}}",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "mTLS initialization status",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "cacheTimeout": null,
                  "datasource": null,
                  "gridPos": {
                    "h": 8,
                    "w": 5,
                    "x": 7,
                    "y": 11
                  },
                  "id": 67,
                  "links": [],
                  "options": {
                    "displayMode": "basic",
                    "fieldOptions": {
                      "calcs": [
                        "mean"
                      ],
                      "defaults": {
                        "mappings": [],
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 10
                            }
                          ]
                        }
                      },
                      "overrides": [],
                      "values": false
                    },
                    "orientation": "horizontal",
                    "showUnfilled": true
                  },
                  "pluginVersion": "6.6.2",
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_mtls_init_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id, reason)",
                      "legendFormat": "{{reason}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "mTLS Initialization Errors",
                  "type": "bargauge"
                },
                {
                  "aliasColors": {},
                  "bars": true,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": null,
                  "description": "This chart shows when workload certificate is rotated.",
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 8,
                    "w": 7,
                    "x": 12,
                    "y": 11
                  },
                  "hiddenSeries": false,
                  "id": 66,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": false,
                  "linewidth": 1,
                  "nullPointMode": "null",
                  "options": {
                    "dataLinks": []
                  },
                  "percentage": false,
                  "pluginVersion": "6.6.2",
                  "pointradius": 2,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(dapr_runtime_mtls_workload_cert_rotated_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "format": "time_series",
                      "instant": false,
                      "intervalFactor": 2,
                      "legendFormat": "OK {{app_id}}",
                      "refId": "A"
                    },
                    {
                      "expr": "rate(dapr_runtime_mtls_workload_cert_rotated_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}[5m])",
                      "intervalFactor": 2,
                      "legendFormat": "Error {{app_id}}",
                      "refId": "B"
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Workload certificate rotation status",
                  "tooltip": {
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": false
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "cacheTimeout": null,
                  "datasource": null,
                  "gridPos": {
                    "h": 8,
                    "w": 5,
                    "x": 19,
                    "y": 11
                  },
                  "id": 68,
                  "links": [],
                  "options": {
                    "displayMode": "basic",
                    "fieldOptions": {
                      "calcs": [
                        "mean"
                      ],
                      "defaults": {
                        "mappings": [],
                        "thresholds": {
                          "mode": "absolute",
                          "steps": [
                            {
                              "color": "green",
                              "value": null
                            },
                            {
                              "color": "red",
                              "value": 10
                            }
                          ]
                        }
                      },
                      "overrides": [],
                      "values": false
                    },
                    "orientation": "horizontal",
                    "showUnfilled": true
                  },
                  "pluginVersion": "6.6.2",
                  "targets": [
                    {
                      "expr": "sum(dapr_runtime_mtls_workload_cert_rotated_fail_total{app_id=~\"$dapr_app_id\", kubernetes_namespace=\"$namespace\"}) by (app_id, reason)",
                      "legendFormat": "{{reason}} ({{app_id}})",
                      "refId": "A"
                    }
                  ],
                  "timeFrom": null,
                  "timeShift": null,
                  "title": "Cert rotation error reasons",
                  "type": "bargauge"
                }
              ],
              "title": "Security",
              "type": "row"
            }
          ],
          "refresh": "10s",
          "schemaVersion": 22,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "text": "longhaul-test",
                  "value": "longhaul-test"
                },
                "datasource": "Prometheus",
                "definition": "label_values(dapr_runtime_component_loaded,kubernetes_namespace)",
                "hide": 0,
                "includeAll": false,
                "label": "NAMESPACE",
                "multi": false,
                "name": "namespace",
                "options": [],
                "query": "label_values(dapr_runtime_component_loaded,kubernetes_namespace)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "text": "feed-generator + hashtag-actor + hashtag-counter + message-analyzer",
                  "value": [
                    "feed-generator",
                    "hashtag-actor",
                    "hashtag-counter",
                    "message-analyzer"
                  ]
                },
                "datasource": "Prometheus",
                "definition": "label_values(dapr_runtime_component_loaded,app_id)",
                "hide": 0,
                "includeAll": false,
                "label": "APPID",
                "multi": true,
                "name": "dapr_app_id",
                "options": [],
                "query": "label_values(dapr_runtime_component_loaded,app_id)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-3h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ]
          },
          "timezone": "",
          "title": "Dapr Sidecar Dashboard",
          "uid": "Ym9RqIuWk",
          "version": 39
        }